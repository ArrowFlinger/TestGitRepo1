function NAuction(){this.bid=function(e,t,n,r){var s="";var n=n||"";var r=r||"";if(r!="")f=$("#"+r).length>0?$("#"+r).serializeArray():"";else f=$("#bidform").length>0?$("#bidform").serializeArray():"";if(typeof t==="object"){z=0;var o=[];$.each(auction_types,function(e,n){if(typeof n!=="undefined"){var r=[],i=[];$.each(t,function(t,n){if(e==n.auction_type){if(r.length<=0){r[e]=new Array}i={pid:n.pid,uid:n.uid,astart:n.astart};r[e]=r[e].concat(i);o[z]={url:n.bidurl,pid:r}}});z++}});var u=n!=""?{pid:t,timestamp:n}:{pid:t};typeof t!="object"?$(".loader"+t).show():"";$.each(o,function(e,t){if(typeof t!=="undefined"){var r=new Array;i=0;$.each(t.pid,function(e,t){if(typeof t!=="undefined"){r[i]=t;i++}});$.ajax({url:t.url,cache:false,type:"get",dataType:"jsonp",timeout:5e3,data:{pid:r,timestamp:n},contentType:"application/json; charset=utf-8",complete:function(e){},success:function(e){},error:function(e,t,n){Auction.showConsole(n)}})}});Auction.getauctionstatus(a["status"],"1",a["pid"])}else{var u=n!=""?{pid:t,timestamp:n,formvalues:f}:{pid:t,formvalues:f};typeof t!="object"?$(".loader"+t).show():"";$.ajax({url:e,cache:false,type:"get",dataType:"jsonp",timeout:5e3,data:u,contentType:"application/json; charset=utf-8",complete:function(e,t){},success:function(e){var t=$(".bid").attr("title");var n=$("#notice_msg"+e.id);$(".loader"+e.id).hide();Auction.check_userbalance();Auction.check_userbonus();if(e.Message===null&&e.Bid_count>0){Auction.getauctionstatus(a["status"],"1",a["pid"]);Auction.bidhistory()}else{$(n).show();$(n).html(e.Message);$(n).fadeOut(5e3)}},error:function(e,t,n){Auction.showConsole(n)}})}};this.showConsole=function(e){if(developement){console.log(e)}};this.getauctionstatus=function(status,ses,pid,arrayset){var bidurl=$(".bid").attr("name");var ses=ses||"";var saveover=0;var pricepaid=0;var spids=new Array;var npids=new Array;var status=a["status"]=status||5;var pid=a["pid"]=pid||"";var arrayset=a["arrayset"]=arrayset||[];var url=$(".auction_item").attr("name")||baseurl+"auctions/process";var total_autobidarr_len=0;pid!=""?Auction.bidhistory():"";if(typeof a["autobids"]!=="undefined"){total_autobidarr_len=Auction.len(a["autobids"]);if(total_autobidarr_len>0){datas=a["autobids"]!=="undefined"?{autobid:a["autobids"],status:status,pid:pid,arrayset:arrayset}:""}else{datas={status:status,pid:pid,arrayset:arrayset}}}else{datas={status:status,pid:pid,arrayset:arrayset}}try{$.ajax({url:url,dataType:"jsonp",cache:false,type:"get",data:datas,timeout:1e4,contentType:"application/json; charset=utf-8",success:function(data){$(".bid").show();var newautobid=$(data["autobids"]).compare(a["autobids"]);if(!newautobid&&a["status"]!=5&&a["status"]!=3){Auction.getDetails();set=0}$.each(data["auctions"],function(i,item){spids[i]=item.Product.id;if(typeof a[item.Product.element]=="undefined"){return}if(typeof auction_types!=="undefined"){var fun="Auction."+auction_types[item.Product.auction_type];try{if(typeof eval(fun)==="function")window["Auction"][auction_types[item.Product.auction_type]](item)}catch(e){Auction.showConsole(e)}}});if(data["auctions"].length>lp){var ab=0;if(oldpids.length>0){for(var d=0;d<spids.length;d++){for(k=0;k<oldpids.length;k++){if(spids[d]==oldpids[k]){ab=0;break}else{ab=1}}if(ab==1){npids.push(spids[d])}}}else{npids=spids}sa=1;lp=data.length}if(!got_data){setInterval(function(){Auction.timer()},1e3)}got_data=true;var $timeinterval=ses==""?processinterval:5e3;timer=ses==""?setTimeout(function(){Auction.getauctionstatus(status,ses,pid,arrayset)},$timeinterval):"";ses="";if($(".auction_item").length<=0&&$(".no_data").length<=0&&a["status"]==4){$(".no_data_show").html('<h4 class="no_data fl clr">'+language.no_live_auction_at_the_moment+"</h4>")}},error:function(e,t,n){Auction.showConsole(n)}})}catch(e){Auction.showConsole(e)}set++};this.configureURL=function(e){var e=e||0;Auction.showConsole(auctions_list)};this.add_blocks=function(e){$.ajax({url:baseurl+"auctions/addBlock",type:"get",data:{pids:e},cache:false,dataType:"json",success:function(e){if($(".auction_item").length>0){$(".auction_item:last").after(e["output"])}else{$(".action_deal_list").html(e["output"])}},error:function(e,t,n){Auction.showConsole(n)}})};this.timer=function(){$(".auction_item").each(function(){var auctionId=$(this).attr("id");var auction_type=$(this).find(".auction_type").attr("data-auctiontype");if(typeof a[auctionId]=="undefined"){return}if(typeof auction_types!=="undefined"){var fun="Auction.timer_"+auction_types[auction_type];try{if(typeof eval(fun)==="function")window["Auction"]["timer_"+auction_types[auction_type]](auctionId,auction_type)}catch(e){Auction.showConsole(e)}}})};this.autobidarr=function(){return typeof a["autobids"]!=="undefined"?a["autobids"]:[]};this.getDetails=function(){try{$.ajax({url:baseurl+"auctions/details",type:"post",dataType:"json",timeout:5e3,success:function(e){a["autobids"]=e.autobids}})}catch(e){Auction.showConsole(e)}};this.len=function(e){var t=0;$.each(e,function(e,n){t++});return t};this.autobid=function(e){var e=e;var t=new Array;var n=0;$.each(e,function(t,r){for(k in r){var i=r[k].shift();r[k].push(i);var s=k.toString();e[n][s.toString()]=r[k]}n++});loopautobids=set>1?e:Auction.autobidarr();var r=this;var s=Auction.len(e);if(item_len>0&&typeof e!="undefined"&&s>0){var o=new Array;for(i=0;i<s;i++){for(k in e[i]){pid=k.split("_");uid=e[i][k][0].split("-");var u=baseurl+modulebidurl+auction_types[pid[1]]+"/bid";o[i]={pid:pid[0],uid:uid[0],bidurl:u,auction_type:pid[1],astart:uid[1]};break}}Auction.bid(baseurl+"auctions/bid/",o,"");set++;r!=="undefined"?setTimeout(function(){Auction.autobid(loopautobids)},autobidinterval):""}return};this.countdown=function(e,t){if(e.getHours()<10){hrs="0"+e.getHours().toString()}else{hrs=e.getHours().toString()}if(e.getMinutes()<10){mins="0"+e.getMinutes().toString()}else{mins=e.getMinutes().toString()}if(e.getSeconds()<10){secs="0"+e.getSeconds().toString()}else{secs=e.getSeconds().toString()}var n=$("#theme_name").val();if(n=="white"){tm=t+":"+hrs+":"+mins+":"+secs}else{tm='<div class="timer"><ul><li><div class="d-timer"><div class="t-timer-lft"></div><div class="t-timer-mid"><span>'+t+'</span></div><div class="t-timer-rft"></div><p class="d_time1">'+"d "+"</p></div></li><li>:</li>"+'<li><div class="d-timer"><div class="t-timer-lft"></div><div class="t-timer-mid"><span>'+hrs+"</span></div>"+'<div class="t-timer-rft"></div><p class="d_time1">'+" hr "+"</p></div></li><li>:</li>"+'<li><div class="d-timer"><div class="t-timer-lft"></div><div class="t-timer-mid"><span>'+mins+"</span></div>"+'<div class="t-timer-rft"></div><p class="d_time1">'+" min "+"</p></div></li><li>:</li>"+'<li><div class="d-timer"><div class="t-timer-lft"></div><div class="t-timer-mid"><span>'+secs+'</span></div><div class="t-timer-rft"></div><p class="d_time1">'+"s"+"</p></div></li></ul></div>"}return tm};this.bidhistory=function(){if($(".bid_history").length>0){var e=$(".bid_history").attr("id");$.ajax({url:e,type:"get",data:"q=history",cache:false,contentType:"application/x-www-form-urlencoded;charset=ISO-8859-15",complete:function(e){$(".bid_history").html(e.responseText)}})}};this.updateAuction=function(e,t,n,r){module=auction_types[n];r=r||{};updateurl=baseurl+"site/"+module+"/updateproduct";$.ajax({url:updateurl,type:"get",data:{status:e,pid:t,array:r},cache:false,complete:function(e){},success:function(e){},error:function(){Auction.showConsole("Update error")}})};this.clearArray=function(e){var t=new Array;for(var n=0;n<e.length;n++){if(e[n]){t.push(e[n])}}return t};this.status=function(){return a["status"]};this.servertime=function(){var e=typeof server_unixtimestamp!="undefined"&&server_unixtimestamp!=""?server_unixtimestamp*1e3:a["unix_timestamp"]*1e3;var t=new Date(e);var n=t.getHours();var r="AM";if(n>=12){n=n-12;r="PM"}if(n==0){n=12}var i=n<10?"0"+n:n;var s=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();var o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();var u=i+":"+s+":"+o+" "+r;if(typeof a["unix_timestamp"]!="undefined"){a["unix_timestamp"]=a["unix_timestamp"]+1}server_unixtimestamp++;var f=$("#theme_name").val();if(f=="white"){$(".server_time_hrs").html(i);$(".server_time_mins").html(s);$(".server_time_secs").html(o)}else{$(".server_time").html(u)}setTimeout(function(){Auction.servertime()},1e3)};this.check_userbalance=function(){try{var e=$(".user").html();$.ajax({url:baseurl+"auctions/check_balance/"+e,type:"get",data:"",cache:false,contentType:"application/x-www-form-urlencoded;charset=ISO-8859-15",complete:function(e){$(".user_balance").html(e.responseText)}})}catch(t){}};this.check_userbonus=function(){var e=$(".user").html();var t=$(".user_bonus").attr("title");$.ajax({url:baseurl+"auctions/check_bonus/"+e,type:"get",data:"",contentType:"application/x-www-form-urlencoded;charset=ISO-8859-15",complete:function(e){var t=e.responseText;if($(".user_bonus b").html()!=""){$(".user_bonus b").html(t)}else{$(".user_bonus").html("0")}}})};var themename=$("#theme_name").val();if(themename!="white"){this.gmap=function(e,t){if(rendergmap){if(typeof google!=="undefined"){var n={center:new google.maps.LatLng(e,t),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP};var r=new google.maps.Map(document.getElementById("map-canvas"),n);var i=new google.maps.Marker({position:n.center});i.setMap(r);pantoDefined=new google.maps.LatLng(e,t);r.panTo(pantoDefined);rendergmap=false}}return true};this.sendRequestViaMultiFriendSelector=function(e){FB.ui({method:"apprequests",message:e["invite_text"],exclude_ids:e["exclude_ids"]},Auction.requestCallback)}}this.requestCallback=function(e){if(typeof e!=="undefined"&&e!=null){$.ajax({url:baseurl+"users/invite",type:"GET",dataType:"json",data:{ids:e.to,rid:e.request},beforeSend:function(){$("#fb_loader").remove();$(".action_deal_list").before('<div id="fb_loader" style="text-align:center; font-size:16px;">Loading...</div>')},complete:function(e){},success:function(e){location.reload();$("#fb_loader").remove()}})}Auction.showConsole(e)}}function confirmDelete(e){var t=confirm(e);if(t){return true}else{return false}}function label_onfocus(e,t){var n=$("#"+e);if(n.attr("value")==t){n.val("")}}function label_onblur(e,t){var n=$("#"+e);if(n.attr("value")==""){n.val(t)}}var msg=[],a=[],ln=[],autobidinterval=6e3,processinterval=2e3,developement=false,loopautobids=[],item_len=0,timer="",baseurl="",server_unixtimestamp="",set=0,la=true,loadservertime=true,aj=0,rendergmap=true,sk=[],oldpids=[],auctions_list=[],auction_types=[],prodbidder=[],lp=0,modulebidurl="site/",sa=0,datas="",got_data=false,hours=0,closedremovetime=15,checkboxHeight="25",radioHeight="25",selectWidth="66";$(document).ready(function(){item_len=$(".auction_item").length;lp=item_len;baseurl=language.baseurl;server_unixtimestamp=language.unix_timestamp;Auction.getDetails();$.extend({getAuctionTypes:function(e){var t=null;$.ajax({url:e,type:"get",dataType:"json",contentType:"application/json; charset=utf-8",async:false,success:function(e){var n=0;$.each(e,function(e,t){auction_types[t.typeid]=t.typename;n++});t=auction_types}});return t}});auction_types=$.getAuctionTypes(baseurl+"modules/getAuctiontypes_ajax");var e=0;$(".auction_item").each(function(){var t=$(this).attr("id");var n=$(this).find(".addwatchlist").attr("rel");var r=$(this).data("auctiontype");oldpids[e]=n;if(item_len>0){if(typeof n!=undefined){sk[n]=n}a[t]=$("#"+t);a[t]["countdown"]=$("#"+t+" .countdown");a[t]["bid"]=$("#"+t+" .bid");a[t]["bidme_link"]=$("#"+t+" .bidme_link");a[t]["product_bidnow_link"]=$("#"+t+" .product_bidnow_link");a[t]["futureday"]=$("#"+t+" .futureday");a[t]["comingsoon"]=$("#"+t+" .comingsoon")}e++});if($(".user").html()){$(".bid").live("click",function(){var e=$(this).attr("name");var t=$(this).attr("id");var n=typeof $(this).attr("data-formid")!==undefined?$(this).data("formid"):"";var r=$(this).data("auctiontype");var i=baseurl+modulebidurl+auction_types[r]+"/bid";if(!a["auction_"+t]["bid"].hasClass("new_block")){Auction.bid(i,t,a["auction_"+t]["timestamp_diff"],n)}})}if(!$(".user").html()){$(".bid").mouseover(function(){$(this).html(language.login_labels);$(this).click(function(){window.location=$(this).attr("rel")})});$(".bid").mouseout(function(){$(this).html(language.bid_me_label)})}$(".addwatchlist").click(function(){var e=$(this).attr("rel");var t=$(this).attr("name");$(".loader"+e).show();var n=$("#notice_msg"+e);if($(".user").html()){$.ajax({url:t,type:"GET",data:"pid="+e,contentType:"application/x-www-form-urlencoded;charset=ISO-8859-15",complete:function(t){$(".loader"+e).hide();var r=t.responseText;if(r==1){$(n).show();$(n).html(language.added_in_your_watchlist);$(n).fadeOut(5e3)}else{$(n).show();$(n).css({color:"#F00"});$(n).html(language.already_in_your_watchlist);$(n).fadeOut(5e3)}}})}else{$(".loader"+e).hide();$(n).show();$(n).html(language.login_access);$(n).fadeOut(5e3)}return false});$("#category_list").click(function(){$("#div_category").toggle()});$("#div_category").click(function(){$("#div_category").hide()});if($("#category_fetch").length){var t=$("#category_fetch").html();$("#category_list").val(t)}});$.fn.compare=function(e){try{if(typeof e!=="undefined"){if(this.length!=e.length){return false}var t=this.sort(),n=e.sort();var r=0;for(var i=0;e[i];i++){for(k in n[i]){if(t[i][k].length!=n[i][k].length){return false}}}return true}}catch(s){Auction.showConsole(s)}};$(window).load(function(){item_len>0?setTimeout(function(){var e=Auction.clearArray(sk);var t=0;var n=Auction.len(Auction.autobidarr());for(i=0;i<n;i++){for(k in Auction.autobidarr()[i]){for(z=0;z<e.length;z++){s=k.split("_");if(e[z]==s[0]){t=0;break}else{t=1}}if(t==0){break}}if(t==0){break}}t==0?Auction.autobid(Auction.autobidarr()):""},2e3):"";if(loadservertime){setTimeout(function(){Auction.servertime()},2e3)}});document.write('<style type="text/css">input.styled { display: none; } select.styled { position: relative; width: '+selectWidth+"px; opacity: 0; filter: alpha(opacity=0); z-index: 5; } .disabled { opacity: 0.5; filter: alpha(opacity=50); }</style>");var Custom={init:function(){var e=document.getElementsByTagName("input"),t=Array(),n,r,i;for(ma=0;ma<e.length;ma++){if((e[ma].type=="checkbox"||e[ma].type=="radio")&&e[ma].className=="styled"){t[ma]=document.createElement("span");t[ma].className=e[ma].type;if(e[ma].checked==true){if(e[ma].type=="checkbox"){position="0 -"+checkboxHeight*2+"px";t[ma].style.backgroundPosition=position}else{position="0 -"+radioHeight*2+"px";t[ma].style.backgroundPosition=position}}e[ma].parentNode.insertBefore(t[ma],e[ma]);e[ma].onchange=Custom.clear;if(!e[ma].getAttribute("disabled")){t[ma].onmousedown=Custom.pushed;t[ma].onmouseup=Custom.check}else{t[ma].className=t[ma].className+=" disabled"}}}e=document.getElementsByTagName("select");for(ma=0;ma<e.length;ma++){if(e[ma].className=="styled"){r=e[ma].getElementsByTagName("option");i=r[0].childNodes[0].nodeValue;n=document.createTextNode(i);for(b=0;b<r.length;b++){if(r[b].selected==true){n=document.createTextNode(r[b].childNodes[0].nodeValue)}}t[ma]=document.createElement("span");t[ma].className="select";t[ma].id="select"+e[ma].name;t[ma].appendChild(n);e[ma].parentNode.insertBefore(t[ma],e[ma]);if(!e[ma].getAttribute("disabled")){e[ma].onchange=Custom.choose}else{e[ma].previousSibling.className=e[ma].previousSibling.className+=" disabled"}}}document.onmouseup=Custom.clear},pushed:function(){element=this.nextSibling;if(element.checked==true&&element.type=="checkbox"){this.style.backgroundPosition="0 -"+checkboxHeight*3+"px"}else if(element.checked==true&&element.type=="radio"){this.style.backgroundPosition="0 -"+radioHeight*3+"px"}else if(element.checked!=true&&element.type=="checkbox"){this.style.backgroundPosition="0 -"+checkboxHeight+"px"}else{this.style.backgroundPosition="0 -"+radioHeight+"px"}},check:function(){element=this.nextSibling;if(element.checked==true&&element.type=="checkbox"){this.style.backgroundPosition="0 0";element.checked=false}else{if(element.type=="checkbox"){this.style.backgroundPosition="0 -"+checkboxHeight*2+"px"}else{this.style.backgroundPosition="0 -"+radioHeight*2+"px";group=this.nextSibling.name;inputs=document.getElementsByTagName("input");for(ma=0;ma<inputs.length;ma++){if(inputs[ma].name==group&&inputs[ma]!=this.nextSibling){inputs[ma].previousSibling.style.backgroundPosition="0 0"}}}element.checked=true}},clear:function(){inputs=document.getElementsByTagName("input");for(var e=0;e<inputs.length;e++){if(inputs[e].type=="checkbox"&&inputs[e].checked==true&&inputs[e].className=="styled"){inputs[e].previousSibling.style.backgroundPosition="0 -"+checkboxHeight*2+"px"}else if(inputs[e].type=="checkbox"&&inputs[e].className=="styled"){inputs[e].previousSibling.style.backgroundPosition="0 0"}else if(inputs[e].type=="radio"&&inputs[e].checked==true&&inputs[e].className=="styled"){inputs[e].previousSibling.style.backgroundPosition="0 -"+radioHeight*2+"px"}else if(inputs[e].type=="radio"&&inputs[e].className=="styled"){inputs[e].previousSibling.style.backgroundPosition="0 0"}}},choose:function(){option=this.getElementsByTagName("option");document.forms["lang"].submit();for(d=0;d<option.length;d++){if(option[d].selected==true){document.getElementById("select"+this.name).childNodes[0].nodeValue=option[d].childNodes[0].nodeValue}}}};window.onload=Custom.init;(function(e){e.fn.idle=function(t){var n={idle:6e4,events:"mousemove keypress mousedown",onIdle:function(){},onActive:function(){},keepTracking:false};var r=false;var i=e.extend({},n,t);var s=function(e,t){if(r){t.onActive.call();r=false}clearTimeout(e);return o(t)};var o=function(e){id=setTimeout(function(){r=true;e.onIdle.call();if(e.keepTracking){o(e)}},e.idle);return id};return this.each(function(){id=o(i);e(this).bind(i.events,function(e){id=s(id,i)})})}})(jQuery);$(document).idle({onIdle:function(){window.location=language.baseurl+"auctions/idle"},onActive:function(){window.location=language.baseurl+"auctions/live"},idle:6e5});var Auction=new NAuction
